-- --------------------------------------------------------
-- Host:                         localhost
-- Versión del servidor:         5.7.20-log - MySQL Community Server (GPL)
-- SO del servidor:              Win32
-- HeidiSQL Versión:             9.4.0.5125
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


-- Volcando estructura de base de datos para dbcasacambioforex
DROP DATABASE IF EXISTS `dbcasacambioforex`;
CREATE DATABASE IF NOT EXISTS `dbcasacambioforex` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `dbcasacambioforex`;

-- Volcando estructura para procedimiento dbcasacambioforex.actualizarPersona
DROP PROCEDURE IF EXISTS `actualizarPersona`;
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `actualizarPersona`(
parTipoDocumento_IdTipoDocumento varchar(5), 
parNumeroDocumentoPersona varchar(25), 
parApellidoPrimeroPersona varchar(100), 
parApellidoSegundoPersona varchar(100), 
parNombresPersona varchar(150), 
parPais_idPais varchar(5),
parOcupacion_IdOcupacion varchar(5)
)
BEGIN
UPDATE persona SET
TipoDocumento_IdTipoDocumento=parTipoDocumento_IdTipoDocumento,
NumeroDocumentoPersona=parNumeroDocumentoPersona,
ApellidoPrimeroPersona=parApellidoPrimeroPersona,
ApellidoSegundoPersona=parApellidoSegundoPersona,
NombresPersona=parNombresPersona,
Pais_idPais=parPais_idPais,
Ocupacion_IdOcupacion=parOcupacion_IdOcupacion
   WHERE NumeroDocumentoPersona=parNumeroDocumentoPersona;
END//
DELIMITER ;

-- Volcando estructura para procedimiento dbcasacambioforex.actualizarTipoUsuario
DROP PROCEDURE IF EXISTS `actualizarTipoUsuario`;
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `actualizarTipoUsuario`(
parIdTipoUsuario int, 
parDescripcionTipoUsuario varchar(75)
)
BEGIN
UPDATE persona SET
DescripcionTipoUsuario=parDescripcionTipoUsuario
   WHERE IdTipoUsuario=parIdTipoUsuario;
END//
DELIMITER ;

-- Volcando estructura para procedimiento dbcasacambioforex.actualizarUsuario
DROP PROCEDURE IF EXISTS `actualizarUsuario`;
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `actualizarUsuario`(
parIdUsuario int, 
parPersona_NumeroDocumentoPersona varchar(25), 
parNombreUsuario varchar(25), 
parPasswordUsuario varchar(16), 
parTipoUsuario_IdTipoUsuario int, 
parEstadoUsuario tinyint
)
BEGIN
UPDATE persona SET
Persona_NumeroDocumentoPersona=parPersona_NumeroDocumentoPersona,
NombreUsuario=parNombreUsuario,
PasswordUsuario=parPasswordUsuario,
TipoUsuario_IdTipoUsuario=parTipoUsuario_IdTipoUsuario,
EstadoUsuario=parEstadoUsuario
   WHERE IdUsuario=parIdUsuario;
END//
DELIMITER ;

-- Volcando estructura para procedimiento dbcasacambioforex.insertarPersona
DROP PROCEDURE IF EXISTS `insertarPersona`;
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `insertarPersona`(
parTipoDocumento_IdTipoDocumento varchar(5), 
parNumeroDocumentoPersona varchar(25), 
parApellidoPrimeroPersona varchar(100), 
parApellidoSegundoPersona varchar(100), 
parNombresPersona varchar(150), 
parPais_idPais varchar(5),
parOcupacion_IdOcupacion varchar(5)
)
BEGIN
 INSERT INTO persona(
TipoDocumento_IdTipoDocumento,
NumeroDocumentoPersona,
ApellidoPrimeroPersona,
ApellidoSegundoPersona,
NombresPersona,
Pais_idPais,
Ocupacion_IdOcupacion) 
VALUES(parTipoDocumento_IdTipoDocumento,
parNumeroDocumentoPersona,
parApellidoPrimeroPersona,
parApellidoSegundoPersona,
parNombresPersona,
parPais_idPais,
parOcupacion_IdOcupacion);
END//
DELIMITER ;

-- Volcando estructura para procedimiento dbcasacambioforex.insertarTipoUsuario
DROP PROCEDURE IF EXISTS `insertarTipoUsuario`;
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `insertarTipoUsuario`(
parIdTipoUsuario INT, 
parDescripcionTipoUsuario varchar(75)
)
BEGIN
 INSERT INTO usuario(
IdTipoUsuario , 
DescripcionTipoUsuario )
VALUES(
parIdTipoUsuario,
parDescripcionTipoUsuario);
END//
DELIMITER ;

-- Volcando estructura para procedimiento dbcasacambioforex.insertarUsuario
DROP PROCEDURE IF EXISTS `insertarUsuario`;
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `insertarUsuario`(
parPersona_NumeroDocumentoPersona varchar(25), 
parNombreUsuario varchar(25), 
parPasswordUsuario varchar(16), 
parTipoUsuario_IdTipoUsuario int, 
parEstadoUsuario tinyint
)
BEGIN
 INSERT INTO usuario(
Persona_NumeroDocumentoPersona , 
NombreUsuario , 
PasswordUsuario , 
TipoUsuario_IdTipoUsuario , 
EstadoUsuario )
VALUES(
parPersona_NumeroDocumentoPersona,
parNombreUsuario,
parPasswordUsuario,
parEstadoUsuario);
END//
DELIMITER ;

-- Volcando estructura para tabla dbcasacambioforex.ocupacion
DROP TABLE IF EXISTS `ocupacion`;
CREATE TABLE IF NOT EXISTS `ocupacion` (
  `IdOcupacion` varchar(5) NOT NULL,
  `DescripcionOcupacion` varchar(75) DEFAULT NULL,
  PRIMARY KEY (`IdOcupacion`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Volcando datos para la tabla dbcasacambioforex.ocupacion: ~5 rows (aproximadamente)
DELETE FROM `ocupacion`;
/*!40000 ALTER TABLE `ocupacion` DISABLE KEYS */;
INSERT INTO `ocupacion` (`IdOcupacion`, `DescripcionOcupacion`) VALUES
	('1', 'Ingeniero'),
	('2', 'Policia'),
	('3', 'Soporte'),
	('4', 'Arquitecto'),
	('5', 'Ingeniero Civil');
/*!40000 ALTER TABLE `ocupacion` ENABLE KEYS */;

-- Volcando estructura para tabla dbcasacambioforex.pais
DROP TABLE IF EXISTS `pais`;
CREATE TABLE IF NOT EXISTS `pais` (
  `IdPais` varchar(5) NOT NULL,
  `NombrePais` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`IdPais`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Volcando datos para la tabla dbcasacambioforex.pais: ~5 rows (aproximadamente)
DELETE FROM `pais`;
/*!40000 ALTER TABLE `pais` DISABLE KEYS */;
INSERT INTO `pais` (`IdPais`, `NombrePais`) VALUES
	('1', 'PERU'),
	('2', 'ESPAÑA'),
	('3', 'MEXICO'),
	('4', 'ARGENTINA'),
	('5', 'BRASIL');
/*!40000 ALTER TABLE `pais` ENABLE KEYS */;

-- Volcando estructura para tabla dbcasacambioforex.persona
DROP TABLE IF EXISTS `persona`;
CREATE TABLE IF NOT EXISTS `persona` (
  `TipoDocumento_IdTipoDocumento` varchar(5) NOT NULL,
  `NumeroDocumentoPersona` varchar(25) NOT NULL,
  `ApellidoPrimeroPersona` varchar(100) DEFAULT NULL,
  `ApellidoSegundoPersona` varchar(100) DEFAULT NULL,
  `NombresPersona` varchar(150) DEFAULT NULL,
  `Pais_idPais` varchar(5) NOT NULL,
  `Ocupacion_IdOcupacion` varchar(5) NOT NULL,
  PRIMARY KEY (`NumeroDocumentoPersona`),
  KEY `fk_Persona_TipoDocumento_idx` (`TipoDocumento_IdTipoDocumento`),
  KEY `fk_Persona_Pais1_idx` (`Pais_idPais`),
  KEY `fk_Persona_Ocupacion1_idx` (`Ocupacion_IdOcupacion`),
  CONSTRAINT `fk_Persona_Ocupacion1` FOREIGN KEY (`Ocupacion_IdOcupacion`) REFERENCES `ocupacion` (`IdOcupacion`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_Persona_Pais1` FOREIGN KEY (`Pais_idPais`) REFERENCES `pais` (`IdPais`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_Persona_TipoDocumento` FOREIGN KEY (`TipoDocumento_IdTipoDocumento`) REFERENCES `tipodocumento` (`IdTipoDocumento`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Volcando datos para la tabla dbcasacambioforex.persona: ~1 rows (aproximadamente)
DELETE FROM `persona`;
/*!40000 ALTER TABLE `persona` DISABLE KEYS */;
INSERT INTO `persona` (`TipoDocumento_IdTipoDocumento`, `NumeroDocumentoPersona`, `ApellidoPrimeroPersona`, `ApellidoSegundoPersona`, `NombresPersona`, `Pais_idPais`, `Ocupacion_IdOcupacion`) VALUES
	('1', '75689712', 'VEGA', 'CALLE', 'ALBERTO', '3', '2');
/*!40000 ALTER TABLE `persona` ENABLE KEYS */;

-- Volcando estructura para tabla dbcasacambioforex.tipodocumento
DROP TABLE IF EXISTS `tipodocumento`;
CREATE TABLE IF NOT EXISTS `tipodocumento` (
  `IdTipoDocumento` varchar(5) NOT NULL,
  `DescripcionTipoDocumento` varchar(125) DEFAULT NULL,
  PRIMARY KEY (`IdTipoDocumento`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Volcando datos para la tabla dbcasacambioforex.tipodocumento: ~2 rows (aproximadamente)
DELETE FROM `tipodocumento`;
/*!40000 ALTER TABLE `tipodocumento` DISABLE KEYS */;
INSERT INTO `tipodocumento` (`IdTipoDocumento`, `DescripcionTipoDocumento`) VALUES
	('1', 'DNI'),
	('2', 'RUC');
/*!40000 ALTER TABLE `tipodocumento` ENABLE KEYS */;

-- Volcando estructura para tabla dbcasacambioforex.tipousuario
DROP TABLE IF EXISTS `tipousuario`;
CREATE TABLE IF NOT EXISTS `tipousuario` (
  `IdTipoUsuario` int(11) NOT NULL AUTO_INCREMENT,
  `DescripcionTipoUsuario` varchar(75) DEFAULT NULL,
  PRIMARY KEY (`IdTipoUsuario`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

-- Volcando datos para la tabla dbcasacambioforex.tipousuario: ~1 rows (aproximadamente)
DELETE FROM `tipousuario`;
/*!40000 ALTER TABLE `tipousuario` DISABLE KEYS */;
INSERT INTO `tipousuario` (`IdTipoUsuario`, `DescripcionTipoUsuario`) VALUES
	(1, 'ADMIN');
/*!40000 ALTER TABLE `tipousuario` ENABLE KEYS */;

-- Volcando estructura para tabla dbcasacambioforex.usuario
DROP TABLE IF EXISTS `usuario`;
CREATE TABLE IF NOT EXISTS `usuario` (
  `IdUsuario` int(11) NOT NULL AUTO_INCREMENT,
  `Persona_NumeroDocumentoPersona` varchar(25) NOT NULL,
  `NombreUsuario` varchar(25) DEFAULT NULL,
  `PasswordUsuario` varchar(16) DEFAULT NULL,
  `TipoUsuario_IdTipoUsuario` int(11) NOT NULL,
  `EstadoUsuario` tinyint(4) DEFAULT NULL,
  PRIMARY KEY (`IdUsuario`),
  UNIQUE KEY `Persona_NumeroDocumentoPersona_UNIQUE` (`Persona_NumeroDocumentoPersona`),
  KEY `fk_Usuario_TipoUsuario1_idx` (`TipoUsuario_IdTipoUsuario`),
  KEY `fk_Usuario_Persona1_idx` (`Persona_NumeroDocumentoPersona`),
  CONSTRAINT `fk_Usuario_Persona1` FOREIGN KEY (`Persona_NumeroDocumentoPersona`) REFERENCES `persona` (`NumeroDocumentoPersona`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_Usuario_TipoUsuario1` FOREIGN KEY (`TipoUsuario_IdTipoUsuario`) REFERENCES `tipousuario` (`IdTipoUsuario`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Volcando datos para la tabla dbcasacambioforex.usuario: ~0 rows (aproximadamente)
DELETE FROM `usuario`;
/*!40000 ALTER TABLE `usuario` DISABLE KEYS */;
/*!40000 ALTER TABLE `usuario` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
